{% extends 'base.html.twig' %}

{% block title %}All Jobs{% endblock %}

{% block body %}

<div class="container py-5">
    <h2 class="mb-4 text-secondary text-center">All Jobs</h2>

    <div class="row g-4">
        {% for job in jobs %}
            <div class="col-md-6">
                <div class="card job-card h-100 shadow-sm rounded">

                    <!-- Card Body -->
                    <div class="card-body p-3 d-flex flex-column">

                        <!-- Top Row: Logo + Job Info -->
                        <div class="d-flex mb-3">

                            <!-- Company Logo -->
                            <div class="me-3 d-flex align-items-center">
                                <img src="{{ asset('images/' ~ job.company.logo|default('default.png')) }}"
                                     alt="{{ job.company.name }}"
                                     style="width:60px; height:60px; object-fit:contain; border-radius:8px;">
                            </div>

                            <!-- Job Info -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-start mb-1">
                                    <div>
                                        <h5 class="card-title mb-1">{{ job.title }}</h5>
                                        <small class="text-muted">
                                            {{ job.company.name }} â€¢ {{ job.city }}, {{ job.country }}
                                        </small>
                                    </div>

                                    <!-- Badge -->
                                    {% if job.remoteAllowed %}
                                        <span class="badge badge-remote">REMOTE</span>
                                    {% else %}
                                        <span class="badge badge-onsite">ONSITE</span>
                                    {% endif %}
                                </div>

                                <!-- Salary -->
                                {% if job.salaryMin and job.salaryMax %}
                                    <p class="mb-1 text-success">
                                        ${{ job.salaryMin|number_format(0, '.', ',') }} - ${{ job.salaryMax|number_format(0, '.', ',') }}
                                    </p>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Short Description -->
                        <p class="description mb-3 flex-grow-1">
                            {{ job.description|slice(0, 140) ~ '...' }}
                        </p>

                        <!-- Apply Now Button -->
                        <div class="mt-auto">
                            <a href="{{ path('app_jobapplication', {'id': job.id}) }}"
                               class="btn btn-jobstock w-100">
                                <i class="bi bi-send me-1"></i> Apply Now
                            </a>
                        </div>

                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>

{% endblock %}